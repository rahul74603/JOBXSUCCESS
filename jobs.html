<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Listings</title>
    <link rel="stylesheet" href="style.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.2/firebase-firestore.js"></script>
</head>
<body>
    <h1>Latest Job Listings</h1>

    <!-- Filters -->
    <div class="filters">
        <select id="jobTypeFilter">
            <option value="">Select Job Type</option>
            <option value="Full-time">Full-time</option>
            <option value="Part-time">Part-time</option>
        </select>
        
        <select id="locationFilter">
            <option value="">Select Location</option>
            <option value="Delhi">Delhi</option>
            <option value="Mumbai">Mumbai</option>
            <option value="Bangalore">Bangalore</option>
        </select>

        <button onclick="applyFilters()">Apply Filters</button>
    </div>

    <!-- Loading Animation -->
    <div id="loading">Loading Jobs...</div>

    <!-- Jobs Container -->
    <div id="jobs-container"></div>

    <script src="firebase-config.js"></script>
    <script>
        // Check Firebase Initialization
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        } else {
            console.log("Firebase already initialized!");
        }

        // Fetch Jobs Data
        async function fetchJobs() {
            document.getElementById("loading").style.display = "block"; // Show Loading
            try {
                let response = await fetch(firebaseConfig.API_URL);
                let data = await response.json();
                displayJobs(data);
            } catch (error) {
                console.error("Error fetching jobs:", error);
            }
            document.getElementById("loading").style.display = "none"; // Hide Loading
        }

        // Display Jobs
        function displayJobs(jobs) {
            let container = document.getElementById("jobs-container");
            container.innerHTML = "";
            jobs.forEach(job => {
                let jobCard = `
                    <div class="job">
                        <h3>${job.title}</h3>
                        <p><strong>Company:</strong> ${job.company}</p>
                        <p><strong>Location:</strong> ${job.location}</p>
                        <p><strong>Type:</strong> ${job.type}</p>
                        <a href="${job.link}" target="_blank">Apply Now</a>
                    </div>
                `;
                container.innerHTML += jobCard;
            });
        }

        // Apply Filters
        function applyFilters() {
            let type = document.getElementById("jobTypeFilter").value;
            let location = document.getElementById("locationFilter").value;
            
            fetch(firebaseConfig.API_URL)
                .then(response => response.json())
                .then(data => {
                    let filteredJobs = data.filter(job => 
                        (type ? job.type === type : true) &&
                        (location ? job.location === location : true)
                    );
                    displayJobs(filteredJobs);
                })
                .catch(error => console.error("Error filtering jobs:", error));
        }

        fetchJobs(); // Load Jobs on Page Load
    </script>
</body>
</html>
