<!DOCTYPE html>
   <html lang="hi">
   <head>
       <meta charset="UTF-8">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <title>ЁЯУМ рд╕рд░рдХрд╛рд░реА рдиреМрдХрд░рд┐рдпрд╛рдВ - JOBXSUCCESS</title>
       <link rel="stylesheet" href="style.css"> <!-- тЬЕ External CSS -->
   </head>
   <body>
       <!-- ЁЯФ╣ Navigation Bar -->
       <div class="navbar">
           <a href="index.html">ЁЯПа Home</a>
           <a href="jobs.html" class="active">ЁЯУМ рд╕рд░рдХрд╛рд░реА рдиреМрдХрд░рд┐рдпрд╛рдВ</a>
           <a href="study.html">ЁЯУЪ рд╕реНрдЯрдбреА рдордЯреЗрд░рд┐рдпрд▓</a>
       </div>

       <h1>ЁЯУМ рд╕рд░рдХрд╛рд░реА рдиреМрдХрд░рд┐рдпрд╛рдВ</h1>

       <!-- ЁЯФЩ Back Button -->
       <button onclick="goBack()" class="back-btn">тмЕя╕П Back</button>

       <!-- ЁЯФе Jobs List -->
       <ul id="jobsList">тП│ рд▓реЛрдб рд╣реЛ рд░рд╣рд╛ рд╣реИ...</ul>

       <!-- ЁЯФе Firebase SDK + Config -->
       <script src="firebase-config.js"></script>
       <script>
           document.addEventListener("DOMContentLoaded", async function () {
               // тЬЕ Firebase SDK рд▓реЛрдб рдХрд░рдирд╛
               if (typeof firebase === "undefined") {
                   const firebaseScript = document.createElement("script");
                   firebaseScript.src = "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
                   firebaseScript.onload = () => {
                       const dbScript = document.createElement("script");
                       dbScript.src = "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";
                       dbScript.onload = initializeFirebase;
                       document.head.appendChild(dbScript);
                   };
                   document.head.appendChild(firebaseScript);
               } else {
                   initializeFirebase();
               }

               function initializeFirebase() {
                   import("./firebase-config.js")
                       .then((configModule) => {
                           const firebaseConfig = configModule.default;

                           if (!firebase.apps.length) {
                               firebase.initializeApp(firebaseConfig);
                           }

                           loadJobs();
                       })
                       .catch((error) => console.error("тЭМ Firebase config рд▓реЛрдб рдХрд░рдиреЗ рдореЗрдВ рд╕рдорд╕реНрдпрд╛:", error));
               }

               // тЬЕ рд╕рд░рдХрд╛рд░реА рдиреМрдХрд░рд┐рдпреЛрдВ рдХреА рд▓рд┐рд╕реНрдЯ рд▓реЛрдб рдХрд░рдирд╛
               function loadJobs() {
                   const jobsList = document.getElementById("jobsList");
                   const db = firebase.database().ref("jobs");

                   db.on("value", (snapshot) => {
                       jobsList.innerHTML = "";
                       const jobs = snapshot.val();

                       if (jobs) {
                           Object.keys(jobs).forEach((key) => {
                               const job = jobs[key];
                               const deadlineText = job.lastDate ? `ЁЯУЕ рдЕрдВрддрд┐рдо рддрд┐рдерд┐: ${job.lastDate}` : "";

                               const jobElement = document.createElement("li");
                               jobElement.classList.add("job-item");
                               jobElement.innerHTML = `
                                   <div class="job-card">
                                       <h3>${job.title}</h3>
                                       <p>ЁЯПв <strong>${job.company}</strong></p>
                                       <p>ЁЯУН <strong>${job.location}</strong></p>
                                       <p>${deadlineText}</p>
                                       <a class="apply-btn" href="${job.applyLink}" target="_blank">ЁЯЪА рдЖрд╡реЗрджрди рдХрд░реЗрдВ</a>
                                   </div>
                               `;
                               jobsList.appendChild(jobElement);
                           });
                       } else {
                           jobsList.innerHTML = "<li>рдХреЛрдИ рд╕рд░рдХрд╛рд░реА рдиреМрдХрд░реА рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ</li>";
                       }
                   });
               }

               // тЬЕ Back Button Fix
               window.goBack = function () {
                   window.history.back();
               };
           });
       </script>
   </body>
   </html>
