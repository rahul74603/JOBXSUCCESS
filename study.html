<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ЁЯУЪ Study Materials - JOBXSUCCESS</title>
    <link rel="stylesheet" href="style.css"> <!-- тЬЕ External CSS -->
</head>
<body>

    <!-- ЁЯФ╣ Navigation Bar -->
    <div class="navbar">
        <a href="index.html">ЁЯПа Home</a>
        <a href="jobs.html">ЁЯУМ Government Jobs</a>
        <a href="study.html" class="active">ЁЯУЪ Study Materials</a>
    </div>

    <h1>ЁЯУЪ рдлреНрд░реА рд╕реНрдЯрдбреА рдордЯреЗрд░рд┐рдпрд▓реНрд╕</h1>

    <!-- ЁЯФЩ Back Button -->
    <button onclick="goBack()" class="back-btn">тмЕя╕П Back</button>

    <div id="materials-container">
        <ul id="firebase-materials"></ul>
        <ul id="github-materials">тП│ рд▓реЛрдб рд╣реЛ рд░рд╣рд╛ рд╣реИ...</ul>
    </div>

    <!-- ЁЯФе Firebase SDK + Config -->
    <script src="firebase-config.js"></script>
    <script>
        firebase.initializeApp(firebaseConfig);
    </script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

        // ЁЯФЩ Back Button Function
        function goBack() {
            window.history.back();
        }

        // Firebase рд╕реЗ рдбреЗрдЯрд╛ рд▓реЛрдб рдХрд░рдирд╛
        async function fetchMaterials() {
            const db = getDatabase(firebase.app());
            const materialsList = document.getElementById("firebase-materials");
            const materialsRef = ref(db, "StudyMaterials");

            onValue(materialsRef, (snapshot) => {
                materialsList.innerHTML = "";
                const data = snapshot.val();

                if (data) {
                    Object.keys(data).forEach((key) => {
                        const material = data[key];
                        const li = document.createElement("li");

                        const title = material.title || "N/A";
                        const downloadLink = material.link || "#";

                        li.innerHTML = `<h3>ЁЯФ╣ ${title}</h3>
                                        <a href="${downloadLink}" target="_blank" class="download-btn">ЁЯУе Download Now</a>`;
                        materialsList.appendChild(li);
                    });
                } else {
                    materialsList.innerHTML = "<p>тЪая╕П рдХреЛрдИ рд╕реНрдЯрдбреА рдордЯреЗрд░рд┐рдпрд▓ рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИред</p>";
                }
            });
        }

        fetchMaterials();

        // GitHub рд╕реЗ рдбреЗрдЯрд╛ рд▓реЛрдб рдХрд░рдирд╛
        async function fetchGitHubMaterials() {
            const githubRepo = "https://api.github.com/repos/rahul74603/JOBXSUCCESS/contents/study-materials";
            const githubList = document.getElementById("github-materials");

            try {
                const response = await fetch(githubRepo);
                if (!response.ok) throw new Error(`GitHub API Error: ${response.status}`);

                const folders = await response.json();
                githubList.innerHTML = "";

                if (Array.isArray(folders)) {
                    folders.forEach(folder => {
                        if (folder.type === "dir") {
                            const li = document.createElement("li");
                            li.innerHTML = `<a href="#" onclick="loadCategory('${folder.name}')">${folder.name}</a>`;
                            githubList.appendChild(li);
                        }
                    });
                } else {
                    githubList.innerHTML = "<p>тЪая╕П рдХреЛрдИ рд╕реНрдЯрдбреА рдордЯреЗрд░рд┐рдпрд▓ рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИред</p>";
                }
            } catch (error) {
                console.error("тЭМ GitHub рд╕реЗ рдбреЗрдЯрд╛ рд▓реЛрдб рдХрд░рдиреЗ рдореЗрдВ рджрд┐рдХреНрдХрдд:", error);
            }
        }

        fetchGitHubMaterials();

        // рдЕрдиреНрдп functions...
    </script>

</body>
</html>
